(function(e){function t(t){for(var r,s,c=t[0],a=t[1],d=t[2],l=0,h=[];l<c.length;l++)s=c[l],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);u&&u(t);while(h.length)h.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],r=!0,c=1;c<i.length;c++){var a=i[c];0!==n[a]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=i[0]))}return e}var r={},n={app:0},o=[];function s(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=r,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=a;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var r=i("85ec"),n=i.n(r);n.a},5045:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"nav"}},[i("router-link",{attrs:{to:"/"}},[e._v("Game")]),e._v(" | "),i("router-link",{attrs:{to:"/high-scores"}},[e._v("High Scores")])],1),i("router-view")],1)},o=[],s=(i("034f"),i("2877")),c={},a=Object(s["a"])(c,n,o,!1,null,null,null),d=a.exports,u=i("8c4f"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"scroll-lock",rawName:"v-scroll-lock",value:e.mouseOverGame,expression:"mouseOverGame"}]},[e.boolGameOff?i("button",{staticStyle:{"margin-bottom":"8px"},on:{click:function(t){e.setGameOff(!1),e.allPossibleMoves(),e.drawPiece(),e.drawNextPiece()}}},[e._v(" Start ")]):e._e(),e.boolGameOff?e._e():i("div",{staticStyle:{height:"38px"}}),i("div",{staticStyle:{width:"920px",heigth:"420px",margin:"auto",position:"relative","margin-top":"20px"}},[i("div",{staticStyle:{float:"left",width:"220px","margin-right":"30px","margin-top":"37px"}},[i("b-card",{attrs:{"bg-variant":"dark"}},[i("h4",{staticStyle:{color:"#ffffff"}},[e._v("Score: "+e._s(e.score))])]),i("button",{staticStyle:{"margin-top":"8px"},on:{click:function(t){return e.$bvModal.show("inst-modal")}}},[e._v(" Instructions ")])],1),i("div",{staticClass:"main-grid",staticStyle:{float:"left"},on:{mouseover:function(t){e.mouseOverGame=!0},mouseleave:function(t){e.mouseOverGame=!1}}},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]),e._m(0)]),i("b-modal",{attrs:{id:"inst-modal",title:"Instructions","hide-footer":""}},[i("div",{staticClass:"modal-class"},[i("h6",[e._v("Goal")]),i("ul",[i("li",[e._v("Fill rows and columns with blocks to clear them")]),i("li",[e._v("Get as high of a score as you can")])]),i("h6",[e._v("Controls")]),i("ul",[i("li",[e._v(" Use left and right arrow keys to cycle through block placements ")]),i("li",[e._v(" Can also scroll to cycle through block placements when hovering the mouse over the game grid ")]),i("li",[e._v("Press Enter to place block")])])])]),i("b-modal",{attrs:{id:"end-modal",title:"GAME OVER","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":"","hide-footer":""}},[i("div",{staticClass:"modal-class"},[i("h4",{staticStyle:{"margin-bottom":"16px"}},[e._v("Final Score: "+e._s(e.score))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentScore.name,expression:"currentScore.name"}],staticStyle:{"margin-bottom":"16px"},attrs:{type:"text"},domProps:{value:e.currentScore.name},on:{input:function(t){t.target.composing||e.$set(e.currentScore,"name",t.target.value)}}}),i("button",{attrs:{disabled:""===e.currentScore.name},on:{click:function(t){return t.preventDefault(),e.resetGame()}}},[e._v(" Submit ")])])])],1)},h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{float:"left","margin-left":"30px"}},[i("h5",{staticStyle:{"margin-top":"5px"}},[e._v("Next Piece:")]),i("div",{staticClass:"next-grid"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")])])}],v=(i("a623"),i("4160"),i("a630"),i("caad"),i("45fc"),i("b0c0"),i("d3b7"),i("07ac"),i("25f0"),i("3ca3"),i("159b"),i("5530")),f=i("2f62"),m=i("bc3a"),p=i.n(m),g=p.a.create({baseURL:"http://localhost:3000",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4}),b={getScores:function(){return g.get("/scores")},postScore:function(e){return g.post("/scores",e)}},w=(i("d81d"),i("96cf"),i("1da1")),P=i("d4ec"),S=i("bee2"),O="https://node.joerock.dev/api/posts",x=function(){function e(){Object(P["a"])(this,e)}return Object(S["a"])(e,null,[{key:"getScores",value:function(){return new Promise(function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,i){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(O);case 3:r=e.sent,n=r.data,t(n.map((function(e){return Object(v["a"])({},e)}))),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,i){return e.apply(this,arguments)}}())}},{key:"insertScore",value:function(e,t){return p.a.post(O,{score:e,name:t})}}]),e}(),y=x;r["default"].use(f["a"]);var _=new f["a"].Store({state:{boolGameOff:!0,errors:[],score:0,scores:[],width:10},mutations:{ADD_ERROR:function(e,t){e.errors.push(t)},CHANGE_BOOL_GAME_OFF:function(e,t){e.boolGameOff=t},CHANGE_SCORE:function(e,t){e.score+=t},SET_SCORE_TO_ZERO:function(e){e.score=0},SET_SCORES:function(e,t){e.scores=t}},actions:{changeBoolGameOff:function(e,t){var i=e.commit,r=t.bool;i("CHANGE_BOOL_GAME_OFF",r)},changeScore:function(e,t){var i=e.commit;i("CHANGE_SCORE",t)},setScoreToZero:function(e){var t=e.commit;t("SET_SCORE_TO_ZERO")},getScores:function(e){var t=e.commit;return b.getScores().then((function(e){t("SET_SCORES",e.data)}))},postScore:function(e,t){var i=e.commit,r=t.score;b.postScore(r).then((function(){i("ADD_SCORE",r)}))},getScoresMongo:function(e){var t=e.commit;return y.getScores().then((function(e){t("SET_SCORES",e)})).catch((function(e){t("ADD_ERROR",e)}))},postScoreMongo:function(e,t){var i=e.commit,r=t.score,n=t.name;y.insertScore(r,n).catch((function(e){i("ADD_ERROR",e)}))}},modules:{}});document.body.style.backgroundColor="#777999";var k={beforeRouteLeave:function(e,t,i){_.dispatch("changeBoolGameOff",{bool:!0}),_.dispatch("setScoreToZero").then((function(){i()}))},data:function(){return{pieces:[],squares:[],nextSquares:[],random:null,currentPiece:[],nextPiece:[],timer:"",currentScore:{name:"",score:null},showModal:!1,mouseOverGame:!1,possiblePlacements:[],nextPieceDivs:[],placementIndex:0}},computed:Object(v["a"])({},Object(f["c"])({width:"width",score:"score",boolGameOff:"boolGameOff"})),methods:Object(v["a"])({allPossibleMoves:function(){for(var e=1,t=1,i=0;i<this.currentPiece.length;i++){var r=this.currentPiece[i].toString(),n=parseInt(r[0]);r.length>1&&n+1>t&&(t=n+1),this.currentPiece[i]%10>e-1&&(e=this.currentPiece[i]%10+1)}function o(e){return!e.classList.contains("placed")}for(var s=[],c=[],a=0;a<10*(this.width+1-t);a+=this.width)for(var d=0;d<this.width+1-e;d++){for(var u=[],l=[],h=0;h<this.currentPiece.length;h++)u.push(this.squares[a+d+this.currentPiece[h]]),l.push(this.squares[a+d+this.currentPiece[h]]);l.every(o)&&c.push(l);for(var v=!0,f=0;f<u.length;f++)u[f].classList.contains("placed")&&(v=!1);s.push(v)}this.possiblePlacements=c,s.every((function(e){return!1===e}))&&(this.setGameOff(!0),this.gameOver())},getSquares:function(){this.squares=Array.from(document.querySelectorAll(".main-grid div")),this.nextSquares=Array.from(document.querySelectorAll(".next-grid div"))},createPieces:function(){this.pieces=[{lOne:[0,this.width,2*this.width,2*this.width+1,2*this.width+2]},{lTwo:[2,1,0,this.width,2*this.width]},{lThree:[0,1,2,this.width+2,2*this.width+2]},{lFour:[2,this.width+2,2*this.width+2,2*this.width+1,2*this.width]},{smallSquare:[0,1,this.width,this.width+1]},{bigSquare:[0,1,2,this.width,this.width+1,this.width+2,2*this.width,2*this.width+1,2*this.width+2]},{oneByOne:[0]},{oneByTwo:[0,1]},{oneByThree:[0,1,2]},{oneByFour:[0,1,2,3]},{oneByFive:[0,1,2,3,4]},{twoByOne:[0,this.width]},{threeByOne:[0,this.width,2*this.width]},{fourByOne:[0,this.width,2*this.width,3*this.width]},{fiveByOne:[0,this.width,2*this.width,3*this.width,4*this.width]},{lFive:[0,1,this.width+1]},{lSix:[1,this.width+1,this.width]},{lSeven:[this.width+1,this.width,0]},{lEight:[this.width,0,1]}]},getRandomCurrent:function(){this.random=Math.floor(Math.random()*this.pieces.length),this.nextPiece=Object.values(this.pieces[this.random])[0]},drawPiece:function(){this.boolGameOff||this.possiblePlacements[this.placementIndex].forEach((function(e){e.classList.add("piece")}))},drawNextPiece:function(){var e=this;this.boolGameOff||(this.nextPiece.forEach((function(t){var i=t;10===i?i=5:11===i?i=6:12===i?i=7:20===i?i=10:21===i?i=11:22===i?i=12:30===i?i=15:40===i&&(i=20),e.nextPieceDivs.push(e.nextSquares[i])})),this.nextPieceDivs.forEach((function(e){e.classList.add("piece")})))},undrawPiece:function(){this.boolGameOff||this.possiblePlacements[this.placementIndex].forEach((function(e){e.classList.remove("piece")}))},undrawNextPiece:function(){this.boolGameOff||(this.nextPieceDivs=[])},movePiece:function(e){this.undrawPiece(),0===this.placementIndex&&e<0?this.placementIndex=this.possiblePlacements.length-1:this.placementIndex===this.possiblePlacements.length-1&&e>0?this.placementIndex=0:this.placementIndex+=e,this.drawPiece()},checkScrollDirection:function(e){!this.boolGameOff&&this.mouseOverGame&&(e.wheelDeltaY>13?this.movePiece(1):e.wheelDeltaY<-13&&this.movePiece(-1))},control:function(e){this.boolGameOff||(39===e.keyCode?this.movePiece(1):13===e.keyCode?this.placePiece():37===e.keyCode&&this.movePiece(-1))},placePiece:function(){if(!this.boolGameOff){var e=this.possiblePlacements[this.placementIndex].some((function(e){return e.classList.contains("placed")}));e||(this.possiblePlacements[this.placementIndex].forEach((function(e){e.classList.remove("piece"),e.classList.add("placed")})),this.nextPieceDivs.forEach((function(e){e.classList.remove("piece")})),this.nextPieceDivs=[],_.dispatch("changeScore",this.currentPiece.length),this.placementIndex=0,this.currentPiece=this.nextPiece,this.getRandomCurrent(),this.checkFill(),this.allPossibleMoves(),this.drawPiece(),this.drawNextPiece())}},checkFill:function(){for(var e=this,t=[],i=0;i<99;i+=this.width){var r=[i,i+1,i+2,i+3,i+4,i+5,i+6,i+7,i+8,i+9];r.every((function(t){return e.squares[t].classList.contains("placed")}))&&r.forEach((function(e){t.includes(e)||t.push(e)}))}for(var n=0;n<10;n++){var o=[0+n,10+n,20+n,30+n,40+n,50+n,60+n,70+n,80+n,90+n];o.every((function(t){return e.squares[t].classList.contains("placed")}))&&o.forEach((function(e){t.includes(e)||t.push(e)}))}_.dispatch("changeScore",t.length),t.forEach((function(t){e.squares[t].classList.remove("placed")}))},gameOver:function(){this.$bvModal.show("end-modal")},setGameOff:function(e){_.dispatch("changeBoolGameOff",{bool:e})},submitScore:function(){_.dispatch("postScoreMongo",{score:this.currentScore.score,name:this.currentScore.name})},resetGame:function(){this.$bvModal.hide("end-modal"),this.currentScore.score=this.score,this.submitScore(),_.dispatch("setScoreToZero"),this.squares.forEach((function(e){e.classList.remove("placed"),e.classList.remove("piece")})),this.undrawPiece(),this.undrawNextPiece(),this.random=Math.floor(Math.random()*this.pieces.length),this.currentPiece=Object.values(this.pieces[this.random])[0],this.getRandomCurrent(),this.drawPiece(),this.drawNextPiece()}},Object(f["b"])(["changeScore","postScore","postScoreMongo","setScoreToZero","changeBoolGameOff"])),created:function(){var e=this;this.createPieces(),this.random=Math.floor(Math.random()*this.pieces.length),this.currentPiece=Object.values(this.pieces[this.random])[0],this.getRandomCurrent(),this.timer=setTimeout((function(){return document.addEventListener("keyup",e.control)})),this.timer2=setTimeout((function(){document.body.addEventListener("wheel",e.checkScrollDirection)}))},mounted:function(){this.getSquares(),this.allPossibleMoves(),this.drawPiece(),this.drawNextPiece()},beforeDestroy:function(){clearInterval(this.timer)}},E=k,M=(i("c13e"),Object(s["a"])(E,l,h,!1,null,"1fc20ee0",null)),G=M.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h2",[e._v("High Scores")]),i("b-card",{staticClass:"scores-box",attrs:{"no-body":"","bg-variant":"dark"}},[i("b-tabs",{attrs:{pills:"",card:"",justified:""}},[i("b-tab",{attrs:{"no-body":"",title:"All Time"}},[i("b-button",{staticStyle:{"margin-right":"2px"},attrs:{disabled:e.currentPage<2},on:{click:function(t){e.currentPage--}}},[e._v("Prev")]),i("b-button",{staticStyle:{"margin-left":"2px"},attrs:{disabled:e.currentPage*e.perPage>=e.scores.length},on:{click:function(t){e.currentPage++}}},[e._v("Next")]),i("b-table",{attrs:{items:e.scores,fields:e.fields,small:"",fixed:"",responsive:"sm",dark:"",perPage:e.perPage,currentPage:e.currentPage}})],1),i("b-tab",{attrs:{"no-body":"",title:"This Month"}},[i("b-button",{staticStyle:{"margin-right":"2px"},attrs:{disabled:e.currentPageMonth<2},on:{click:function(t){e.currentPageMonth--}}},[e._v("Prev")]),i("b-button",{staticStyle:{"margin-left":"2px"},attrs:{disabled:e.currentPageMonth*e.perPage>=e.scoresCurrentMonth.length},on:{click:function(t){e.currentPageMonth++}}},[e._v("Next")]),i("b-table",{attrs:{items:e.scoresCurrentMonth,fields:e.fields,small:"",fixed:"",responsive:"sm",dark:"",perPage:e.perPage,currentPage:e.currentPageMonth}})],1),i("b-tab",{attrs:{"no-body":"",title:"Today"}},[i("b-button",{staticStyle:{"margin-right":"2px"},attrs:{disabled:e.currentPageToday<2},on:{click:function(t){e.currentPageToday--}}},[e._v("Prev")]),i("b-button",{staticStyle:{"margin-left":"2px"},attrs:{disabled:e.currentPageToday*e.perPage>=e.scoresToday.length},on:{click:function(t){e.currentPageToday++}}},[e._v("Next")]),i("b-table",{attrs:{items:e.scoresToday,fields:e.fields,small:"",fixed:"",responsive:"sm",dark:"",perPage:e.perPage,currentPage:e.currentPageToday}})],1)],1)],1)],1)},R=[],C=(i("c975"),i("fb6a"),{data:function(){return{fields:["rank","name","score"],currentPage:1,currentPageMonth:1,currentPageToday:1,perPage:10,scoresCurrentMonth:[],scoresToday:[]}},computed:Object(v["a"])({},Object(f["c"])({scores:"scores"})),methods:{compareScores:function(e,t){var i=e.score,r=t.score;return r-i},getScores:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=_.dispatch("getScoresMongo"),t.next=3,i;case 3:for(e.scores.sort(e.compareScores),r=0;r<e.scores.length;r++)e.scores[r].rank=r+1;case 5:case"end":return t.stop()}}),t)})))()},getScoresMonth:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var i,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getScores();case 2:for(i=new Date,r=i.getMonth()+1,n=i.getFullYear(),e.scores.forEach((function(t){var i=t.date.indexOf("/"),o=t.date.indexOf("/",i+1),s=t.date.indexOf("@"),c=t.date.slice(i+1,o),a=t.date.slice(o+1,s);r==c&&n==a&&e.scoresCurrentMonth.push(t)})),o=0;o<e.scoresCurrentMonth.length;o++)e.scoresCurrentMonth[o].rank=o+1;case 7:case"end":return t.stop()}}),t)})))()},getScoresToday:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var i,r,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getScores();case 2:for(i=new Date,r=i.getDate(),n=i.getMonth()+1,o=i.getFullYear(),e.scores.forEach((function(t){var i=t.date.indexOf("/"),s=t.date.indexOf("/",i+1),c=t.date.indexOf("@"),a=t.date.slice(0,i),d=t.date.slice(i+1,s),u=t.date.slice(s+1,c);r==a&&n==d&&o==u&&e.scoresToday.push(t)})),s=0;s<e.scoresToday.length;s++)e.scoresToday[s].rank=s+1;case 8:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.getScores(e.currentPage),t.next=3,i;case 3:return r=e.getScoresMonth(),t.next=6,r;case 6:return n=e.getScoresToday(),t.next=9,n;case 9:case"end":return t.stop()}}),t)})))()},updated:function(){for(var e=0;e<this.scores.length;e++)this.scores[e].rank=e+1}}),j=C,D=(i("94af"),Object(s["a"])(j,T,R,!1,null,"43c994a3",null)),L=D.exports;r["default"].use(u["a"]);var q=[{path:"/",name:"Game",component:G},{path:"/high-scores",name:"HighScores",component:L}],A=new u["a"]({routes:q,mode:"history"}),N=A,B=i("5f5b"),I=(i("f9e3"),i("2dd8"),i("f40c"));r["default"].use(I["a"]),r["default"].use(B["a"]),r["default"].config.productionTip=!1,new r["default"]({router:N,store:_,render:function(e){return e(d)}}).$mount("#app")},"85ec":function(e,t,i){},"94af":function(e,t,i){"use strict";var r=i("c4ac"),n=i.n(r);n.a},c13e:function(e,t,i){"use strict";var r=i("5045"),n=i.n(r);n.a},c4ac:function(e,t,i){}});
//# sourceMappingURL=app.2976e54c.js.map